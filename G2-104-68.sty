%  Copyright (C) 2017 Yuri Stepanenko stepanenkoyra@gmail.com

% This program is free software; you can redistribute it
% and/or modify it under the terms of the GNU Library General Public
% License as published by the Free Software Foundation; either version 2
% of the License, or (at your option) any later version.

% The GNU LIBICONV Library is distributed in the hope that it will be
% useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
% Library General Public License for more details. 

% You should have received a copy of the GNU Library General Public
% License along with the 'eskdi'; see the file License.gpl.
% If not, write to the Free Software Foundation, Inc., 59 Temple Place -
% Suite 330, Boston, MA 02111-1307, USA.

\NeedsTeXFormat{LaTeX2e}

\RequirePackage{ifthen}
\RequirePackage{eso-pic}
\RequirePackage{everyshi}
\RequirePackage{lastpage}
\RequirePackage{everypage}


\RequirePackage{ESKD_frames}

\ProvidesPackage{G2-104-68} [2017/02/11 v4.2 GOST Frames]


\newcounter{MaketitleDef}%
\setcounter{MaketitleDef}{0}%


\newcounter{MakesecondDef}
\setcounter{MakesecondDef}{0}%


\newcounter{MakeregChanges}%
\setcounter{MakeregChanges}{0}%


\newcommand{\SetEmptyPage}{}% Совсем пустая страници, не нумерованная


% Двигает поля для четных и нечетных страниц
\AddEverypageHook
{%
}%


% begin{Верхний колонтитул. Заполняем рамки текстом. Координаты задаются в pt, соответствующие координатам в просмотре}

\renewcommand{\@oddhead}%
{%
  \setlength{\unitlength}{1mm}%
  \ifcase\value{StampACounter}
       %% Default format
  \or  
    \begin{picture}(100,100)(5, 473.5)%
      \DrawAI%
    \end{picture}%   
  \or
    \begin{picture}(100,100)(5, 299.5)%
      \DrawAII%
    \end{picture}%
  \or
    \begin{picture}(100,100)(5, 176.3)%
      \DrawAIII%
    \end{picture}%
  \or
    \ifthenelse{\equal{\value{MakesecondDef}}{1}}%
    {%
      \begin{picture}(100,100)(5, 176.3)%
        \DrawStampPage%
      \end{picture}%
    }%
    {%
      \ifthenelse{\equal{\value{MakeregChanges}}{1}}%
      {%
        \begin{picture}(100,100)(5, 176.3)%
          \DrawRegChanges%
        \end{picture}%
      }%
      {%
        \ifthenelse{\equal{\value{MakesecondDef}}{0}}%
        {%
           \begin{picture}(100,100)(5, 176.3)%
             \DrawAIV%
           \end{picture}%
        }%
        {%
        }%
      }% 
    }%  
  \or  \or  \or  \or  \or  \or %10
  \or  \or  \or  \or  \or  \or  \or  \or  \or  \or  %20
  \or  \or  \or  \or  \or  \or  \or  \or  \or  \or  %30
  \or  \or  \or  \or  \or  \or  \or  \or  \or  \or  %40
  \or \or %42
  \or  
    %StampACounter=43
    \begin{picture}(100,100)(5, 176.3)%
      \DrawAIVxIII%
    \end{picture}%
  \or
    %StampACounter=44
    \begin{picture}(100,100)(5, 176.3)%
      \DrawAIVxIV%
    \end{picture}%
  \or
    %StampACounter=45
    \begin{picture}(100,100)(5, 176.3)%
      \DrawAIVxV%
    \end{picture}%
  \or
    %StampACounter=46
    \begin{picture}(100,100)(5, 176.3)%
      \DrawAIVxVI%
    \end{picture}%
  \else
    \typeout{}
  \fi
}%
% end{Верхний колонтитул. Заполняем рамки текстом. Координаты задаются в pt, соответствующие координатам в просмотре}

%  собственно команды формирования титульного листа
\renewcommand{\maketitle}%
{%
  \setcounter{MaketitleDef}{1}%
  \begin{titlepage}%
    \setlength{\unitlength}{1mm}%
    \begin{picture}(100,100)(-75, 147)%
    \put(-92.8,-29.5){\DrawBorder}%
    \put(-92.8,-29.5){\spboxmm{22}{350}{162}{180}{lc}{\parbox{140mm}{\center\scriptsize Министерство образования и науки Российской Федерации\linebreak\small Муромский институт (филиал)\linebreak\scriptsize федерального государственного бюджетного образовательного учреждения\linebreak\scriptsize высшего образования\linebreak\small «Владимирский государственный университет\linebreak\small имени Александра Григорьевича и Николая Григорьевича Столетовых»\linebreak\scriptsize (МИ ВлГУ) \linebreak}}}%	   	   
    \put(-92.8,-29.5){\spboxmm{22}{270}{162}{180}{lc}{\parbox{140mm}{\center\normalsize Факультет \underline{ \@gostfacylty  }\linebreak\normalsize Кафедра \underline{ \@gostkafedra  } \linebreak}}}%	
    \put(-92.8,-29.5){\spboxmm{22}{200}{162}{180}{lc}{\parbox{140mm}{\center\Huge\@gosttitleobject\linebreak}}}%	  
    \put(-92.8,-29.5){\spboxmm{22}{165}{162}{180}{lc}{\parbox{140mm}{\center\normalsize\@gostpredmet\linebreak}}}%	   	  
    \put(-92.8,-29.5){\spboxmm{22}{170}{162}{180}{lc}{\parbox{140mm}{\flushleft\normalsize По: \hrulefill}}}%
    \put(-92.8,-29.5){\spboxmm{22}{145}{162}{180}{lc}{\parbox{140mm}{\center\normalsize\@gosttitledocument\linebreak}}}%	   	  
    \put(-92.8,-29.5){\spboxmm{22}{150}{162}{180}{lc}{\parbox{140mm}{\flushleft\normalsize Тема: \hrulefill}}}%
    \put(-92.8,-29.5){\spboxmm{90}{120}{162}{180}{lc}{\parbox{70mm}{\flushleft\normalsize Руководитель }}}%	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   
    \put(-92.8,-29.5){\spboxmm{90}{100}{162}{180}{lc}{\parbox{70mm}{\flushleft\hrulefill}}}%
    \put(-92.8,-29.5){\spboxmm{90}{105}{162}{180}{lc}{\parbox{70mm}{\center\normalsize\@gostproveril }}}%	 
    \put(-92.8,-29.5){\spboxmm{90}{95}{162}{180}{lc}{\parbox{70mm}{\center\small (фамилия, инициалы) }}}%	  
    \put(-92.8,-29.5){\spboxmm{90}{70}{162}{180}{lc}{\parbox{70mm}{\flushleft\hrulefill}}}%
    \put(-92.8,-29.5){\spboxmm{90}{75}{162}{180}{lc}{\parbox{70mm}{\flushright\normalsize\@gostDATEproveril }}}%	 
    \put(-92.8,-29.5){\spboxmm{90}{65}{162}{180}{lc}{\parbox{35mm}{\center\small (подпись) }}}% 	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	     	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   
    \put(-92.8,-29.5){\spboxmm{120}{65}{162}{180}{lc}{\parbox{35mm}{\center\small (дата) }}}% 	
    \put(-92.8,-29.5){\spboxmm{90}{50}{162}{180}{lc}{\parbox{70mm}{\flushleft\normalsize Студент\hrulefill }}}%
    \put(-92.8,-29.5){\spboxmm{120}{52}{162}{180}{lc}{\parbox{35mm}{\flushright\normalsize \@gostgroup }}}%	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   
    \put(-92.8,-29.5){\spboxmm{90}{20}{162}{180}{lc}{\parbox{70mm}{\flushleft\hrulefill}}}%
    \put(-92.8,-29.5){\spboxmm{90}{25}{162}{180}{lc}{\parbox{70mm}{\center\normalsize\@gostrazrabotchik }}}%	 
    \put(-92.8,-29.5){\spboxmm{90}{15}{162}{180}{lc}{\parbox{70mm}{\center\small (фамилия, инициалы) }}}%	  
    \put(-92.8,-29.5){\spboxmm{90}{-10}{162}{180}{lc}{\parbox{70mm}{\flushleft\hrulefill}}}%
    \put(-92.8,-29.5){\spboxmm{90}{-5}{162}{180}{lc}{\parbox{70mm}{\flushright\normalsize\@gostDATErazrabotchik }}}%	 
    \put(-92.8,-29.5){\spboxmm{90}{-15}{162}{180}{lc}{\parbox{35mm}{\center\small (подпись) }}}% 	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	     	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   
    \put(-92.8,-29.5){\spboxmm{120}{-15}{162}{180}{lc}{\parbox{35mm}{\center\small (дата) }}}% 	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	     	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   
    \put(-92.8,-29.5){\spboxmm{22}{-150}{162}{180}{lc}{\parbox{140mm}{\center\normalsize \@gostcity ,\@gostyear}}}% 	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	     	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	       	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	     	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   	   	      	    	      	       	    	      	   
    \end{picture}%
  \end{titlepage}%
  \addtocounter{page}{1}%
  \setcounter{footnote}{0}%
}%



\EveryShipout
{%
  \ClearShipoutPicture%
  {% 
    \ifthenelse{\equal{\value{MaketitleDef}}{1}}%
    {%
    }%
    {%
      \ifthenelse{\equal{\value{MakesecondDef}}{1}}%
      {%
        \setcounter{MakesecondDef}{0}%
      }%
      {%
        \ifthenelse{\equal{\value{MakeregChanges}}{1}}%
        {%
          \setcounter{MakeregChanges}{0}%
        }%
        {%
        }%          
      }%      
    }%   
  }%
}%
% end{После вывода  каждой страницы выполняем следующий код для вывода рамок}



% begin{Нижний колонтитул. Заполняем рамки текстом. Координаты задаются в pt, соответствующие координатам в просмотре}
\renewcommand{\@oddfoot}%
{%
   \ifthenelse{\equal{\value{MaketitleDef}}{1}}%
   {%
      \setcounter{MaketitleDef}{0}% 	 
   }%
   {%
   }%
   \ifthenelse{\equal{\value{MakesecondDef}}{1}}%
   {%
   }%
   {%
     \ifthenelse{\equal{\value{MakeregChanges}}{1}}%
     {%
     }%
     {%
     }%     
   }%
}%
% end{Нижний колонтитул. Заполняем рамки текстом. Координаты задаются в pt, соответствующие координатам в просмотре}



%Для изменения размера страницы
\newcommand{\FormatSizeA}[2]
{%
  \clearpage%
  \setlength{\oddsidemargin}{0mm}%  
  \StampA{#1}%
  \PageSizeFormat%
  \TextSizeFormat{#1}%
  \expandafter{#2}%
  %Вернули всё назад
  \clearpage%
  \StampA{4}%
  \PageSizeFormat%
  \TextSizeFormat{4}%
}%







